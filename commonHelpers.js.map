{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  let userSelectedDate = null; // Змінна для зберігання обраної користувачем дати\n  const startButton = document.getElementById('startTimer');\n  const dateTimePicker = document.getElementById('datetime-picker');\n\n  flatpickr(dateTimePicker, {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n      const selectedDate = selectedDates[0]; // Отримуємо обрану дату (перший елемент масиву)\n      if (selectedDate < new Date()) {\n        iziToast.error({\n          title: 'Error',\n          message: 'Please choose a date in the future',\n        });\n        startButton.classList.add('disabled'); // Додаємо клас для вимкнення кнопки\n        userSelectedDate = null; // Очищаємо обрану дату\n      } else {\n        startButton.classList.remove('disabled'); // Видаляємо клас для увімкнення кнопки\n        userSelectedDate = selectedDate; // Зберігаємо обрану дату\n      }\n    },\n  });\n\n  startButton.addEventListener('click', function () {\n    if (userSelectedDate) {\n      startCountdown(userSelectedDate);\n      startButton.classList.add('disabled'); // Вимикаємо кнопку після натискання\n      dateTimePicker.disabled = true; // Деактивуємо поле вибору дати\n    }\n  });\n\n  function startCountdown(targetDate) {\n    const timerUpdate = setInterval(updateTimer, 1000);\n\n    function updateTimer() {\n      const now = new Date().getTime();\n      const difference = targetDate - now;\n\n      if (difference <= 0) {\n        clearInterval(timerUpdate);\n        startButton.classList.remove('disabled'); // Робимо кнопку \"Старт\" знову активною\n        dateTimePicker.disabled = false; // Активуємо поле вибору дати\n        iziToast.success({\n          title: 'Success',\n          message: 'Countdown finished!',\n        });\n        return;\n      }\n\n      const { days, hours, minutes, seconds } = convertMs(difference);\n\n      document.getElementById('days').textContent = addLeadingZero(days);\n      document.getElementById('hours').textContent = addLeadingZero(hours);\n      document.getElementById('minutes').textContent = addLeadingZero(minutes);\n      document.getElementById('seconds').textContent = addLeadingZero(seconds);\n    }\n  }\n\n  function convertMs(ms) {\n    // Кількість мілісекунд на одиницю часу\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n\n    // Залишкові дні\n    const days = Math.floor(ms / day);\n    // Залишкові години\n    const hours = Math.floor((ms % day) / hour);\n    // Залишкові хвилини\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    // Залишкові секунди\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n    return { days, hours, minutes, seconds };\n  }\n\n  function addLeadingZero(value) {\n    return value < 10 ? `0${value}` : value;\n  }\n});\n"],"names":["userSelectedDate","startButton","dateTimePicker","flatpickr","selectedDates","selectedDate","iziToast","startCountdown","targetDate","timerUpdate","updateTimer","now","difference","days","hours","minutes","seconds","convertMs","addLeadingZero","ms","value"],"mappings":"+IAKA,SAAS,iBAAiB,mBAAoB,UAAY,CACxD,IAAIA,EAAmB,KACvB,MAAMC,EAAc,SAAS,eAAe,YAAY,EAClDC,EAAiB,SAAS,eAAe,iBAAiB,EAEhEC,EAAUD,EAAgB,CACxB,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQE,EAAe,CACrB,MAAMC,EAAeD,EAAc,CAAC,EAChCC,EAAe,IAAI,MACrBC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,oCACnB,CAAS,EACDL,EAAY,UAAU,IAAI,UAAU,EACpCD,EAAmB,OAEnBC,EAAY,UAAU,OAAO,UAAU,EACvCD,EAAmBK,EAEtB,CACL,CAAG,EAEDJ,EAAY,iBAAiB,QAAS,UAAY,CAC5CD,IACFO,EAAeP,CAAgB,EAC/BC,EAAY,UAAU,IAAI,UAAU,EACpCC,EAAe,SAAW,GAEhC,CAAG,EAED,SAASK,EAAeC,EAAY,CAClC,MAAMC,EAAc,YAAYC,EAAa,GAAI,EAEjD,SAASA,GAAc,CACrB,MAAMC,EAAM,IAAI,KAAM,EAAC,QAAO,EACxBC,EAAaJ,EAAaG,EAEhC,GAAIC,GAAc,EAAG,CACnB,cAAcH,CAAW,EACzBR,EAAY,UAAU,OAAO,UAAU,EACvCC,EAAe,SAAW,GAC1BI,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,qBACnB,CAAS,EACD,MACD,CAED,KAAM,CAAE,KAAAO,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYC,EAAUL,CAAU,EAE9D,SAAS,eAAe,MAAM,EAAE,YAAcM,EAAeL,CAAI,EACjE,SAAS,eAAe,OAAO,EAAE,YAAcK,EAAeJ,CAAK,EACnE,SAAS,eAAe,SAAS,EAAE,YAAcI,EAAeH,CAAO,EACvE,SAAS,eAAe,SAAS,EAAE,YAAcG,EAAeF,CAAO,CACxE,CACF,CAED,SAASC,EAAUE,EAAI,CAQrB,MAAMN,EAAO,KAAK,MAAMM,EAAK,KAAG,EAE1BL,EAAQ,KAAK,MAAOK,EAAK,MAAO,IAAI,EAEpCJ,EAAU,KAAK,MAAQI,EAAK,MAAO,KAAQ,GAAM,EAEjDH,EAAU,KAAK,MAASG,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAN,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACvC,CAED,SAASE,EAAeE,EAAO,CAC7B,OAAOA,EAAQ,GAAK,IAAIA,CAAK,GAAKA,CACnC,CACH,CAAC"}